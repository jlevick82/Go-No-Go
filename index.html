<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nightly Go/No-Go v6.7.1</title>
  <link rel="manifest" href="manifest.json" />
  <style>
    body { font-family: sans-serif; background:#0b1221; color:#eef3ff; margin:0; padding:0;}
    header { background:#111a2c; padding:10px; display:flex; justify-content:space-between; align-items:center;}
    .banner { padding:15px; text-align:center; font-size:20px; font-weight:bold; border-radius:12px; margin:10px;}
    .go { background:#134d2d;} .warn { background:#7a5d1a;} .nogo { background:#6e1e1e;}
    .kpis { display:grid; grid-template-columns: repeat(auto-fit,minmax(150px,1fr)); gap:8px; margin:10px;}
    .kpi { background:#111a2c; padding:10px; border-radius:10px; text-align:center;}
    .accordion details { margin:6px; border-radius:10px; overflow:hidden;}
    .accordion summary { cursor:pointer; padding:10px; background:#111a2c; font-weight:bold;}
    .card { padding:10px; background:#0f1630; border-radius:10px; margin:6px;}
    .pill { padding:6px 12px; margin:4px; border:none; border-radius:20px; background:#1a274b; color:#cfe8ff; cursor:pointer;}
  </style>
</head>
<body>
<header>
  <div>Nightly Go/No-Go v6.7.1</div>
  <div>
    <button class="pill" id="btnCalc">Calculate</button>
    <button class="pill" id="btnNight">Night Mode</button>
  </div>
</header>

<div id="banner" class="banner nogo">No-Go</div>
<div class="kpis">
  <div class="kpi"><div>Astronomical Dark</div><div id="kDark">â€”</div></div>
  <div class="kpi"><div>Moon</div><div id="kMoon">â€”</div></div>
  <div class="kpi"><div>Top Target</div><div id="kTarget">â€”</div></div>
  <div class="kpi"><div>Time</div><div id="kTime">â€”</div></div>
</div>

<div class="accordion">
  <details open>
    <summary>âš¡ Quick Setup</summary>
    <div class="card">
      Lat <input id="lat" value="37.1"> Lon <input id="lon" value="-76.52"> Bortle <input id="bortle" value="7">
      <button class="pill" id="btnDemo">Demo</button>
    </div>
  </details>
  <details>
    <summary>ðŸ”§ Gear</summary>
    <div class="card">
      Focal length <input id="fl" value="448"> mm<br>
      Pixel size <input id="px" value="3.76"> Âµm<br>
      Sensor <input id="sw" value="11.3">Ã—<input id="sh" value="11.3"> mm
      <div id="gearInfo"></div>
    </div>
  </details>
  <details open>
    <summary>ðŸŽ¯ Targets</summary>
    <div class="card" id="targets">Load catalog...</div>
    <button class="pill" id="btnLoad">Load starter catalog</button>
  </details>
</div>

<script>
const STARTER=[
 {id:'M31',name:'Andromeda',type:'Galaxy',ra:'00h42m',dec:41.27,size:3.2},
 {id:'NGC 7000',name:'North America Nebula',type:'Emission',ra:'20h58m',dec:44.3,size:4.0},
 {id:'IC 1396',name:'Elephant Trunk',type:'Emission',ra:'21h36m',dec:57.5,size:3.0},
 {id:'NGC 7380',name:'Wizard',type:'Emission',ra:'22h47m',dec:58.08,size:1.6}
];
let catalog=[];

function compute(){
  const now=new Date();
  document.getElementById('kTime').textContent=now.toLocaleTimeString();
  document.getElementById('kDark').textContent="9:00pm â†’ 5:00am";
  document.getElementById('kMoon').textContent="60% â€¢ rise 10:30pm";
  document.getElementById('banner').className="banner go";
  document.getElementById('banner').textContent="GO";
  if(catalog.length){document.getElementById('kTarget').textContent=catalog[0].name;} else {document.getElementById('kTarget').textContent="â€”";}
}
function demo(){document.getElementById('lat').value=37.1;document.getElementById('lon').value=-76.52;}
function loadStarter(){catalog=STARTER;document.getElementById('targets').innerHTML=catalog.map(t=>t.id+" â€¢ "+t.name+" ("+t.type+")").join('<br>');}

document.getElementById('btnCalc').addEventListener('click',compute);
document.getElementById('btnDemo').addEventListener('click',demo);
document.getElementById('btnLoad').addEventListener('click',loadStarter);
document.getElementById('btnNight').addEventListener('click',()=>{document.body.classList.toggle('night');});
</script>
</body>
</html>
